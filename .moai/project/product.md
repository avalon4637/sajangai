# sajang.ai - 소상공인 AI 경영 분석 서비스

## 프로젝트 개요

**sajang.ai**는 대한민국 소상공인을 위한 AI 기반 경영 분석 SaaS입니다. 복잡한 회계 지식 없이도 매출, 비용, 수익성 데이터를 업로드하거나 입력하는 것만으로 핵심 KPI를 자동 계산하고, AI가 경영 인사이트와 실행 가능한 조언을 한국어로 제공합니다.

소상공인이 직면하는 가장 큰 어려움은 "내 가게가 지금 잘 되고 있는가?"를 객관적으로 판단하기 어렵다는 점입니다. sajang.ai는 이 문제를 해결하기 위해 생존 점수(Survival Score), What-if 시뮬레이션, CSV 자동 분류, Claude AI 스트리밍 분석을 결합합니다.

## 대상 사용자

- 한국의 음식점, 카페, 소매점 등 소상공인
- 회계사나 경영 컨설턴트 없이 스스로 경영 상태를 파악하고 싶은 사장님
- 배민, 요기요, 쿠팡이츠 등 배달앱 또는 카드 단말기 CSV 데이터를 활용하려는 사업자
- 직원 채용, 임대료 변경, 메뉴 조정 등 의사결정 전 수치 근거를 원하는 사용자

## 핵심 기능

### 1. KPI 자동 계산

매출액, 비용(변동비/고정비), 노무비 데이터를 입력하면 다음 지표를 즉시 산출합니다.

- **매출총이익(Gross Profit)**: 매출액 - 변동비
- **순이익(Net Profit)**: 매출총이익 - 고정비
- **매출총이익률(Gross Margin)**: 수익성의 핵심 지표
- **노무비 비율(Labor Ratio)**: 매출 대비 인건비 부담
- **고정비 비율(Fixed Cost Ratio)**: 매출 대비 고정비 부담
- **생존 점수(Survival Score, 0~100)**: 경영 건전성을 하나의 숫자로 표현

### 2. What-if 시뮬레이션

의사결정 전 수치 변화를 미리 시뮬레이션합니다. 4가지 시나리오 유형을 지원합니다.

- **employee_change**: 직원 수 변경 시 노무비 및 수익성 변화
- **revenue_change**: 매출 증감 시 KPI 변화
- **rent_change**: 임대료 변경 시 순이익 영향
- **expense_change**: 변동비 변경 시 수익 구조 변화

변경 전/후 KPI를 나란히 비교하여 의사결정의 수치 근거를 제공합니다.

### 3. CSV 자동 파싱 및 채널 분류

배달앱, 카드사 등 다양한 한국 POS/배달 서비스의 CSV를 자동 인식합니다.

- PapaParse 기반 파싱 엔진
- 한국어/영어 헤더 자동 감지 및 정규화
- 채널 자동 분류: 카드, 현금, 배달의민족, 요기요, 쿠팡이츠
- 다양한 CSV 포맷의 불일치를 자동 보정

### 4. AI 경영 분석 (Claude Sonnet 4.5)

KPI 계산 결과를 Claude Sonnet 4.5에 전달하여 스트리밍 방식으로 한국어 분석 리포트를 생성합니다.

- 경영 인사이트 및 현황 해석
- 리스크 경고 (수익성 악화, 노무비 과중 등)
- 실행 가능한 개선 제안 (Action Suggestions)

## 사용 시나리오

**시나리오 A - KPI 점검**
사장님이 이번 달 매출과 비용을 입력하면 생존 점수와 함께 "노무비가 매출의 35%를 초과했습니다. 업종 평균은 25%입니다"와 같은 AI 분석을 받습니다.

**시나리오 B - 직원 채용 결정**
직원 1명 추가 시나리오를 시뮬레이션하면, 채용 전/후 순이익과 생존 점수 변화를 즉시 비교할 수 있습니다.

**시나리오 C - CSV 일괄 분석**
배민 주문 내역 CSV를 업로드하면 채널별 매출을 자동 분류하고 KPI를 산출합니다.

**시나리오 D - 임대료 협상**
임대료 인상 요구를 받은 사장님이 인상폭별 시뮬레이션을 실행해 수용 가능한 최대 인상률을 파악합니다.

## 현재 MVP 상태

### 완료된 부분

- KPI 계산 엔진 (`src/lib/kpi/calculator.ts`)
- What-if 시뮬레이션 엔진 (`src/lib/simulation/engine.ts`)
- CSV 파싱 엔진 - 한국어 헤더 자동 감지 포함 (`src/lib/csv/parser.ts`)
- AI 분석 API - Claude 스트리밍 엔드포인트 (`src/app/api/ai/route.ts`)
- Supabase 데이터베이스 스키마 + RLS 정책 (6개 테이블)
- Supabase 클라이언트 레이어 (브라우저/서버/미들웨어)
- shadcn/ui 컴포넌트 6종 (Button, Card, Input, Label, Table, Tabs)
- Tailwind v4 다크 모드 지원 글로벌 스타일

### 미구현 부분

- 인증 UI (로그인/회원가입 페이지)
- 대시보드 페이지 및 위젯
- 매출/비용/고정비 입력 폼
- CSV 업로드 UI
- Zustand 스토어
- 커스텀 훅
- Recharts 차트 컴포넌트
- 테스트 코드 (Vitest)
